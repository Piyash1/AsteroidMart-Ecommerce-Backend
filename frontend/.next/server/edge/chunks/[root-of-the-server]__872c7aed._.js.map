{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/lib/api.ts"],"sourcesContent":["import axios from 'axios';\r\nimport { CategoryDetail, ProductDetail  } from './type';\r\nimport { redirect } from 'next/navigation';\r\n\r\nexport const BASE_URL = 'http://localhost:8000/api';\r\nexport const MEDIA_BASE_URL = 'http://localhost:8000';\r\n\r\nexport const api = axios.create({\r\n    baseURL: 'http://localhost:8000/api',\r\n});\r\n\r\nexport async function getExistingUser(email: string | null | undefined) {\r\n    try {\r\n        const safeEmail = email ? encodeURIComponent(email) : '';\r\n        const response = await api.get(`/existing_user/${safeEmail}/`);\r\n        return response.data;\r\n    } catch (err:unknown) {\r\n        if(err instanceof Error) {\r\n            throw new Error(err.message);\r\n        }\r\n        throw new Error('An unknown error occurred');\r\n    }\r\n}\r\n\r\n\r\n\r\nexport async function createNewUser(data: {\r\n    email: string | null | undefined;\r\n    username: string | null | undefined;\r\n    first_name: string | null | undefined;\r\n    last_name: string | null | undefined;\r\n    profile_picture_url: string | null | undefined;\r\n}) {\r\n    try {\r\n        const response = await api.post('/create_user/', data);\r\n        return response.data;\r\n    }\r\n    catch (err:unknown) {\r\n        if(err instanceof Error) {\r\n            throw new Error(err.message);\r\n        }\r\n        throw new Error('An unknown error occurred');\r\n    }\r\n}\r\n\r\n\r\nexport async function getCategories() {\r\n    try{\r\n        const response = await api.get('category_list');\r\n        return response.data;\r\n    }\r\n    catch (err:unknown) {\r\n        if(err instanceof Error) {\r\n            throw new Error(err.message);\r\n        }\r\n        throw new Error('An unknown error occurred');\r\n    }\r\n}\r\n\r\n\r\nexport async function getProducts() {\r\n    try{\r\n        const response = await api.get('product_list');\r\n        return response.data;\r\n    }\r\n    catch (err:unknown) {\r\n        if(err instanceof Error) {\r\n            throw new Error(err.message);\r\n        }\r\n        throw new Error('An unknown error occurred');\r\n    }\r\n}\r\n\r\nexport async function getCategoryDetail(slug: string): Promise<CategoryDetail> {\r\n    try{\r\n        const response = await api.get(`categories/${encodeURIComponent(slug)}/`);\r\n        return response.data as CategoryDetail;\r\n    }\r\n    catch (err:unknown) {\r\n        if(err instanceof Error) {\r\n            throw new Error(err.message);\r\n        }\r\n        throw new Error('An unknown error occurred');\r\n    }\r\n}\r\n\r\n\r\nexport async function getProductDetail(slug: string): Promise<ProductDetail> {\r\n    try{\r\n        const response = await api.get(`products/${encodeURIComponent(slug)}/`);\r\n        return response.data as ProductDetail;\r\n    }\r\n    catch (err:unknown) {\r\n        if(err instanceof Error) {\r\n            throw new Error(err.message);\r\n        }\r\n        throw new Error('An unknown error occurred');\r\n    }\r\n}\r\n\r\n\r\nexport async function updateReview(reviewId: number, data: { rating?: number; comment?: string }) {\r\n    try {\r\n        const response = await api.put(`update_review/${reviewId}/`, data);\r\n        return response.data;\r\n    } catch (err: unknown) {\r\n        if (err instanceof Error) {\r\n            throw new Error(err.message);\r\n        }\r\n        throw new Error('An unknown error occurred');\r\n    }\r\n}\r\n\r\nexport async function deleteReview(reviewId: number) {\r\n    try {\r\n        const response = await api.delete(`delete_review/${reviewId}/`);\r\n        return response.data;\r\n    } catch (err: unknown) {\r\n        if (err instanceof Error) {\r\n            throw new Error(err.message);\r\n        }\r\n        throw new Error('An unknown error occurred');\r\n    }\r\n}\r\n\r\nexport async function checkProductInCart(cartCode: string, productId: number) {\r\n    if (!cartCode || !productId) {\r\n        throw new Error('Cart code and product ID are required')\r\n    }\r\n    \r\n    try {\r\n        const response = await api.get(`product_in_cart/?cart_code=${cartCode}&product_id=${productId}`);\r\n        return response.data;\r\n    } catch (err: unknown) {\r\n        if (err instanceof Error) {\r\n            throw new Error(err.message);\r\n        }\r\n        throw new Error('An unknown error occurred');\r\n    }\r\n}\r\n\r\nexport async function getCartStats(cartCode: string) {\r\n    if (!cartCode) {\r\n        throw new Error('Cart code is required')\r\n    }\r\n    \r\n    try {\r\n        const response = await api.get(`get_cart_stat/?cart_code=${cartCode}`);\r\n        return response.data;\r\n    } catch (err: unknown) {\r\n        if (err instanceof Error) {\r\n            throw new Error(err.message);\r\n        }\r\n        throw new Error('An unknown error occurred');\r\n    }\r\n}\r\n\r\nexport async function getCart(cart_code: string) {\r\n    try {\r\n        const response = await api.get(`get_cart/${cart_code}/`);\r\n        return response.data;\r\n    } catch (err: unknown) {\r\n        if (err instanceof Error) {\r\n            if(err.message == \"Request failed with status code 404\") {\r\n                redirect('/cart')\r\n            }\r\n            throw new Error(err.message);\r\n        }\r\n        throw new Error('An unknown error occurred');\r\n    }   \r\n    \r\n}\r\n\r\n\r\nexport async function productSearch(searchInput: string | null | undefined) {\r\n    if(!searchInput) {\r\n        return [];\r\n    }\r\n    \r\n    try {\r\n        const response = await api.get(`search/?query=${encodeURIComponent(searchInput)}`);\r\n        return response.data;\r\n    }\r\n    catch (err: unknown) {\r\n        if (err instanceof Error) {\r\n            throw new Error(err.message);\r\n        }\r\n        throw new Error('An unknown error occurred');\r\n    }\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/auth.ts"],"sourcesContent":["import NextAuth from \"next-auth\"\r\nimport Google from \"next-auth/providers/google\"\r\nimport { createNewUser, getExistingUser } from \"./lib/api\";\r\n \r\nexport const { handlers, signIn, signOut, auth } = NextAuth({\r\n  providers: [Google],\r\n  \r\n  callbacks: {\r\n    async signIn({profile}) {\r\n\r\n      try {\r\n\r\n        const email = profile?.email;\r\n        const first_name = profile?.given_name;\r\n        const last_name = profile?.family_name;\r\n        const username = profile?.name?.split(\"@\")[0];\r\n        const profile_picture_url = profile?.picture;\r\n\r\n        const userObj = {email, first_name, last_name, username, profile_picture_url}\r\n\r\n        try {\r\n          await getExistingUser(email)\r\n        }\r\n        catch(err){\r\n          console.log(err)\r\n          await createNewUser(userObj)\r\n        }\r\n        \r\n        return true\r\n      }\r\n      catch(err:unknown) {\r\n        return false\r\n      }\r\n    }\r\n  }\r\n})"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;AACA;;;;AAEO,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,IAAA,wKAAQ,EAAC;IAC1D,WAAW;QAAC,wKAAM;KAAC;IAEnB,WAAW;QACT,MAAM,QAAO,EAAC,OAAO,EAAC;YAEpB,IAAI;gBAEF,MAAM,QAAQ,SAAS;gBACvB,MAAM,aAAa,SAAS;gBAC5B,MAAM,YAAY,SAAS;gBAC3B,MAAM,WAAW,SAAS,MAAM,MAAM,IAAI,CAAC,EAAE;gBAC7C,MAAM,sBAAsB,SAAS;gBAErC,MAAM,UAAU;oBAAC;oBAAO;oBAAY;oBAAW;oBAAU;gBAAmB;gBAE5E,IAAI;oBACF,MAAM,IAAA,qIAAe,EAAC;gBACxB,EACA,OAAM,KAAI;oBACR,QAAQ,GAAG,CAAC;oBACZ,MAAM,IAAA,mIAAa,EAAC;gBACtB;gBAEA,OAAO;YACT,EACA,OAAM,KAAa;gBACjB,OAAO;YACT;QACF;IACF;AACF"}},
    {"offset": {"line": 260, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["export { auth as middleware } from \"@/auth\""],"names":[],"mappings":";AAAA"}}]
}