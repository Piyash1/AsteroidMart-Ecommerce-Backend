{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/LPU/Python/Django%20Projects/Rest%20Api%20Project/AsteroidMart/frontend/components/uiComponents/Button.tsx"],"sourcesContent":["import React from \"react\";\n\ninterface Props extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  className?: string;\n  children: React.ReactNode;\n  handleClick?: () => void;\n}\n\nconst Button = ({ className, children, disabled, handleClick, ...props }: Props) => {\n  return <button \n    onClick={disabled ? undefined : handleClick} \n    className={className} \n    disabled={disabled}\n    {...props}\n  >\n    {children}\n  </button>;\n};\n\nexport default Button;\n"],"names":[],"mappings":";;;;;;AAQA,MAAM,SAAS;QAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,WAAW,EAAE,GAAG,OAAc;IAC7E,qBAAO,6LAAC;QACN,SAAS,WAAW,YAAY;QAChC,WAAW;QACX,UAAU;QACT,GAAG,KAAK;kBAER;;;;;;AAEL;KATM;uCAWS","debugId":null}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///D:/LPU/Python/Django%20Projects/Rest%20Api%20Project/AsteroidMart/frontend/lib/actions.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { signOut } from \"@/auth\"\r\nimport { api } from \"./api\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nexport async function signOutUser() {\r\n    await signOut({redirectTo: \"/\"})\r\n}\r\n\r\n\r\nexport async function addReview(formData: FormData) {\r\n    const product_id = Number(formData.get(\"product_id\"));\r\n    const email = formData.get(\"email\");\r\n    const rating = Number(formData.get(\"rating\"));\r\n    const comment = formData.get(\"review\");\r\n\r\n    const slug = formData.get(\"slug\");\r\n\r\n    if(!product_id || !email || !rating || !comment || !slug){\r\n        throw new Error('Missing required fields')\r\n    }\r\n\r\n    const reviewObj = {product_id, email, rating, comment};\r\n\r\n    try{\r\n        const response = await api.post('add_review/', reviewObj)\r\n        revalidatePath(`/products/${slug}`)\r\n        return response.data\r\n    }catch(err: unknown){\r\n        if(err instanceof Error){\r\n            throw new Error(err.message)\r\n        }\r\n        throw new Error('An unknown error occurred')\r\n    }\r\n\r\n    \r\n}\r\n\r\n\r\nexport async function addToCartAction(formData: FormData) {\r\n    const cart_code = formData.get(\"cart_code\");\r\n    const product_id = formData.get(\"product_id\");\r\n\r\n    const cartitemObj = {cart_code, product_id};\r\n\r\n    try{\r\n        const response = await api.post('add_to_cart/', cartitemObj)\r\n        return response.data\r\n    }catch(err: unknown){\r\n        if(err instanceof Error){\r\n            throw new Error(err.message)\r\n        }\r\n        throw new Error('An unknown error occurred')\r\n    }\r\n}"],"names":[],"mappings":";;;;;;;IAwCsB,kBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA","debugId":null}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///D:/LPU/Python/Django%20Projects/Rest%20Api%20Project/AsteroidMart/frontend/components/productDetail/ProductInfo.tsx"],"sourcesContent":["\"use client\"\n\nimport React, { useState, useEffect } from 'react'\nimport Image from \"next/image\"\nimport Button from '../uiComponents/Button'\nimport { ProductDetail } from '@/lib/type'\nimport { MEDIA_BASE_URL, checkProductInCart } from '@/lib/api'\nimport { useCart } from '@/context/CartContext'\nimport { addToCartAction } from '@/lib/actions'\nimport { toast } from 'react-toastify'\n\nconst ProductInfo = ({ product }: { product: ProductDetail }) => {\n\n  const {cartCode, refreshCartStats} = useCart()\n  const [addToCartLoader, setAddToCartLoader] = useState(false)\n  const [addedToCart, setAddedToCart] = useState(false)\n\n  // Check if product is already in cart when component mounts\n  useEffect(() => {\n    const checkIfInCart = async () => {\n      if (cartCode && product.id) {\n        try {\n          const response = await checkProductInCart(cartCode, product.id)\n          if (response && response.product_in_cart) {\n            setAddedToCart(true)\n          }\n        } catch (error) {\n          console.error('Error checking if product is in cart:', error)\n          // Don't set addedToCart to true on error, let user try again\n        }\n      }\n    }\n\n    checkIfInCart()\n  }, [cartCode, product.id])\n\n  async function handleAddToCart(){\n    if (!cartCode) {\n      toast.error('Cart not available')\n      return\n    }\n\n    setAddToCartLoader(true)\n    const formData = new FormData()\n    formData.set('cart_code', cartCode)\n    formData.set('product_id', product.id.toString())\n\n    try {\n      const response = await addToCartAction(formData)\n      setAddedToCart(true)\n      // Refresh cart stats to update the cart count\n      await refreshCartStats()\n      toast.success('Product added to cart successfully')\n      return response\n    } \n\n    catch(err: unknown){\n      if(err instanceof Error){\n          toast.error(err.message)\n      } else {\n          toast.error('An unknown error occurred')\n      }\n    }\n\n    finally{\n      setAddToCartLoader(false)\n    }\n  }\n\n  return (\n    <div className=\"bg-gray-50 padding-x py-10 flex items-start flex-wrap gap-12 main-max-width padding-x mx-auto\">\n      {/* Product Image */}\n    \n      <div className=\"w-[350px] h-[400px] relative overflow-hidden rounded-lg shadow-sm border border-gray-200\">\n        <Image\n          src={product.image\n            ? (product.image.startsWith('http')\n                ? product.image\n                : `${MEDIA_BASE_URL}${product.image.startsWith('/') ? '' : '/'}${product.image}`)\n            : '/placeholder.svg'}\n          alt={product.name}\n          fill\n          sizes=\"(max-width: 768px) 100vw, 350px\"\n          priority\n          className=\"object-cover rounded-lg\"\n        />\n      </div>\n\n      {/* Product Info */}\n      <div className=\"flex flex-1 flex-col gap-6 max-w-[500px] max-md:w-full\">\n        <div className=\"flex flex-col gap-3\">\n          <h1 className=\"text-3xl font-bold\">{product.name}</h1>\n          <h3 className=\"text-2xl font-semibold text-black\">${product.price}</h3>\n          \n        </div>\n\n        {/* Product Details */}\n        <div>\n          <h3 className=\"font-medium text-lg mb-3\">Details</h3>\n          <p className=\"text-gray-600 text-justify leading-6 text-[14px] max-md:text-[12px]\">\n            {product.description}\n          </p>\n        </div>\n\n        {/* Buttons */}\n        <div className='flex py-3 items-center gap-4 flex-wrap'>\n            <Button \n              disabled={addToCartLoader || addedToCart} \n              handleClick={handleAddToCart} \n              className=\"default-btn disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n                {addToCartLoader ? \"Adding to Cart...\" : addedToCart ? \"Added to Cart\" : \"Add to Cart\"}\n            </Button>\n\n            <Button className=\"wish-btn\">\n                Add to Wishlist\n            </Button>\n        </div>\n        \n      </div>\n    </div>\n  )\n}\n\nexport default ProductInfo"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;;;AATA;;;;;;;;AAWA,MAAM,cAAc;QAAC,EAAE,OAAO,EAA8B;;IAE1D,MAAM,EAAC,QAAQ,EAAE,gBAAgB,EAAC,GAAG,IAAA,qIAAO;IAC5C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAE/C,4DAA4D;IAC5D,IAAA,0KAAS;iCAAC;YACR,MAAM;uDAAgB;oBACpB,IAAI,YAAY,QAAQ,EAAE,EAAE;wBAC1B,IAAI;4BACF,MAAM,WAAW,MAAM,IAAA,mIAAkB,EAAC,UAAU,QAAQ,EAAE;4BAC9D,IAAI,YAAY,SAAS,eAAe,EAAE;gCACxC,eAAe;4BACjB;wBACF,EAAE,OAAO,OAAO;4BACd,QAAQ,KAAK,CAAC,yCAAyC;wBACvD,6DAA6D;wBAC/D;oBACF;gBACF;;YAEA;QACF;gCAAG;QAAC;QAAU,QAAQ,EAAE;KAAC;IAEzB,eAAe;QACb,IAAI,CAAC,UAAU;YACb,+JAAK,CAAC,KAAK,CAAC;YACZ;QACF;QAEA,mBAAmB;QACnB,MAAM,WAAW,IAAI;QACrB,SAAS,GAAG,CAAC,aAAa;QAC1B,SAAS,GAAG,CAAC,cAAc,QAAQ,EAAE,CAAC,QAAQ;QAE9C,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,iKAAe,EAAC;YACvC,eAAe;YACf,8CAA8C;YAC9C,MAAM;YACN,+JAAK,CAAC,OAAO,CAAC;YACd,OAAO;QACT,EAEA,OAAM,KAAa;YACjB,IAAG,eAAe,OAAM;gBACpB,+JAAK,CAAC,KAAK,CAAC,IAAI,OAAO;YAC3B,OAAO;gBACH,+JAAK,CAAC,KAAK,CAAC;YAChB;QACF,SAEO;YACL,mBAAmB;QACrB;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BAGb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,2IAAK;oBACJ,KAAK,QAAQ,KAAK,GACb,QAAQ,KAAK,CAAC,UAAU,CAAC,UACtB,QAAQ,KAAK,GACb,AAAC,GAAmB,OAAjB,+HAAc,EAA8C,OAA3C,QAAQ,KAAK,CAAC,UAAU,CAAC,OAAO,KAAK,KAAoB,OAAd,QAAQ,KAAK,IAChF;oBACJ,KAAK,QAAQ,IAAI;oBACjB,IAAI;oBACJ,OAAM;oBACN,QAAQ;oBACR,WAAU;;;;;;;;;;;0BAKd,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAsB,QAAQ,IAAI;;;;;;0CAChD,6LAAC;gCAAG,WAAU;;oCAAoC;oCAAE,QAAQ,KAAK;;;;;;;;;;;;;kCAKnE,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAA2B;;;;;;0CACzC,6LAAC;gCAAE,WAAU;0CACV,QAAQ,WAAW;;;;;;;;;;;;kCAKxB,6LAAC;wBAAI,WAAU;;0CACX,6LAAC,mJAAM;gCACL,UAAU,mBAAmB;gCAC7B,aAAa;gCACb,WAAU;0CAEP,kBAAkB,sBAAsB,cAAc,kBAAkB;;;;;;0CAG7E,6LAAC,mJAAM;gCAAC,WAAU;0CAAW;;;;;;;;;;;;;;;;;;;;;;;;AAQzC;GA/GM;;QAEiC,qIAAO;;;KAFxC;uCAiHS","debugId":null}},
    {"offset": {"line": 261, "column": 0}, "map": {"version":3,"sources":["file:///D:/LPU/Python/Django%20Projects/Rest%20Api%20Project/AsteroidMart/frontend/components/ui/progress.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\ninterface ProgressProps extends React.ComponentProps<typeof ProgressPrimitive.Root> {\n  indicatorClassName?: string\n}\n\nfunction Progress({\n  className,\n  value,\n  indicatorClassName,\n  ...props\n}: ProgressProps) {\n  return (\n    <ProgressPrimitive.Root\n      data-slot=\"progress\"\n      className={cn(\n        \"bg-primary/20 relative h-2 w-full overflow-hidden rounded-full\",\n        className\n      )}\n      {...props}\n    >\n      <ProgressPrimitive.Indicator\n        data-slot=\"progress-indicator\"\n        className={cn(\"h-full w-full flex-1 transition-all\", indicatorClassName || \"bg-primary\")}\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n      />\n    </ProgressPrimitive.Root>\n  )\n}\n\nexport { Progress }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAWA,SAAS,SAAS,KAKF;QALE,EAChB,SAAS,EACT,KAAK,EACL,kBAAkB,EAClB,GAAG,OACW,GALE;IAMhB,qBACE,6LAAC,+KAAsB;QACrB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,oLAA2B;YAC1B,aAAU;YACV,WAAW,IAAA,qHAAE,EAAC,uCAAuC,sBAAsB;YAC3E,OAAO;gBAAE,WAAW,AAAC,eAAiC,OAAnB,MAAM,CAAC,SAAS,CAAC,GAAE;YAAI;;;;;;;;;;;AAIlE;KAtBS","debugId":null}},
    {"offset": {"line": 306, "column": 0}, "map": {"version":3,"sources":["file:///D:/LPU/Python/Django%20Projects/Rest%20Api%20Project/AsteroidMart/frontend/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,KASb;QATa,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF,GATa;IAUd,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS","debugId":null}},
    {"offset": {"line": 370, "column": 0}, "map": {"version":3,"sources":["file:///D:/LPU/Python/Django%20Projects/Rest%20Api%20Project/AsteroidMart/frontend/components/ui/collapsible.tsx"],"sourcesContent":["\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nfunction Collapsible({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.Root>) {\n  return <CollapsiblePrimitive.Root data-slot=\"collapsible\" {...props} />\n}\n\nfunction CollapsibleTrigger({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleTrigger>) {\n  return (\n    <CollapsiblePrimitive.CollapsibleTrigger\n      data-slot=\"collapsible-trigger\"\n      {...props}\n    />\n  )\n}\n\nfunction CollapsibleContent({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleContent>) {\n  return (\n    <CollapsiblePrimitive.CollapsibleContent\n      data-slot=\"collapsible-content\"\n      {...props}\n    />\n  )\n}\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n"],"names":[],"mappings":";;;;;;;;;AAEA;AAFA;;;AAIA,SAAS,YAAY,KAEoC;QAFpC,EACnB,GAAG,OACoD,GAFpC;IAGnB,qBAAO,6LAAC,kLAAyB;QAAC,aAAU;QAAe,GAAG,KAAK;;;;;;AACrE;KAJS;AAMT,SAAS,mBAAmB,KAE2C;QAF3C,EAC1B,GAAG,OACkE,GAF3C;IAG1B,qBACE,6LAAC,gMAAuC;QACtC,aAAU;QACT,GAAG,KAAK;;;;;;AAGf;MATS;AAWT,SAAS,mBAAmB,KAE2C;QAF3C,EAC1B,GAAG,OACkE,GAF3C;IAG1B,qBACE,6LAAC,gMAAuC;QACtC,aAAU;QACT,GAAG,KAAK;;;;;;AAGf;MATS","debugId":null}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"sources":["file:///D:/LPU/Python/Django%20Projects/Rest%20Api%20Project/AsteroidMart/frontend/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Textarea({ className, ...props }: React.ComponentProps<\"textarea\">) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        \"border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,SAAS,KAAyD;QAAzD,EAAE,SAAS,EAAE,GAAG,OAAyC,GAAzD;IAChB,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,ucACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS","debugId":null}},
    {"offset": {"line": 462, "column": 0}, "map": {"version":3,"sources":["file:///D:/LPU/Python/Django%20Projects/Rest%20Api%20Project/AsteroidMart/frontend/lib/actions.ts"],"sourcesContent":["\"use server\"\r\n\r\nimport { signOut } from \"@/auth\"\r\nimport { api } from \"./api\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nexport async function signOutUser() {\r\n    await signOut({redirectTo: \"/\"})\r\n}\r\n\r\n\r\nexport async function addReview(formData: FormData) {\r\n    const product_id = Number(formData.get(\"product_id\"));\r\n    const email = formData.get(\"email\");\r\n    const rating = Number(formData.get(\"rating\"));\r\n    const comment = formData.get(\"review\");\r\n\r\n    const slug = formData.get(\"slug\");\r\n\r\n    if(!product_id || !email || !rating || !comment || !slug){\r\n        throw new Error('Missing required fields')\r\n    }\r\n\r\n    const reviewObj = {product_id, email, rating, comment};\r\n\r\n    try{\r\n        const response = await api.post('add_review/', reviewObj)\r\n        revalidatePath(`/products/${slug}`)\r\n        return response.data\r\n    }catch(err: unknown){\r\n        if(err instanceof Error){\r\n            throw new Error(err.message)\r\n        }\r\n        throw new Error('An unknown error occurred')\r\n    }\r\n\r\n    \r\n}\r\n\r\n\r\nexport async function addToCartAction(formData: FormData) {\r\n    const cart_code = formData.get(\"cart_code\");\r\n    const product_id = formData.get(\"product_id\");\r\n\r\n    const cartitemObj = {cart_code, product_id};\r\n\r\n    try{\r\n        const response = await api.post('add_to_cart/', cartitemObj)\r\n        return response.data\r\n    }catch(err: unknown){\r\n        if(err instanceof Error){\r\n            throw new Error(err.message)\r\n        }\r\n        throw new Error('An unknown error occurred')\r\n    }\r\n}"],"names":[],"mappings":";;;;;;;IAWsB,YAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA","debugId":null}},
    {"offset": {"line": 477, "column": 0}, "map": {"version":3,"sources":["file:///D:/LPU/Python/Django%20Projects/Rest%20Api%20Project/AsteroidMart/frontend/components/productDetail/ReviewForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { Star } from \"lucide-react\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport React, { useState } from \"react\";\nimport Button from \"../uiComponents/Button\";\nimport { cn } from \"@/lib/utils\";\nimport { ProductDetail, Review } from \"@/lib/type\";\nimport { addReview } from \"@/lib/actions\";\nimport { updateReview } from \"@/lib/api\";\nimport { toast } from 'react-toastify';\nimport { useRouter } from \"next/navigation\";\n\ninterface Props {\n  rating: number;\n  review: string;\n}\n\nconst ReviewForm = ({\n  product,\n  loggedInUserEmail,\n  editMode = false,\n  existingReview = null,\n  onClose,\n  onReviewUpdate\n}: {\n  product: ProductDetail,\n  loggedInUserEmail: string | null | undefined,\n  editMode?: boolean,\n  existingReview?: Review | null,\n  onClose?: () => void,\n  onReviewUpdate?: (updatedReview: { rating: number; comment: string }) => void\n}) => {\n\n  const {id, slug} = product;\n  const [customerReview, setCustomerReview] = useState(editMode && existingReview ? existingReview.comment : '');\n  const [reviewbtnLoading, setReviewbtnLoading] = useState(false);\n\n  const [hoverRating, setHoverRating] = useState(0);\n  const [hoverReview, setHoverReview] = useState(\"\");\n\n  const ratings = [\n    { rating: 1, review: \"Poor\" },\n    { rating: 2, review: \"Fair\" },\n    { rating: 3, review: \"Good\" },\n    { rating: 4, review: \"Very Good\" },\n    { rating: 5, review: \"Excellent\" },\n  ];\n\n  const [clickedRating, setClickedRating] = useState(editMode && existingReview ? existingReview.rating : 0);\n  const [clickedReview, setClickedReview] = useState(editMode && existingReview ? \n    ratings.find(r => r.rating === existingReview.rating)?.review || \"\" : \"\");\n  const router = useRouter();\n\n  const handleStarClick = ({ rating, review }: Props) => {\n    setClickedRating(rating);\n    setClickedReview(review);\n  };\n\n  const handleHoverIn = ({ rating, review }: Props) => {\n    setHoverRating(rating);\n    setHoverReview(review);\n  };\n\n  const handleHoverOut = () => {\n    setHoverRating(0);\n    setHoverReview(\"\");\n  };\n\n  async function handleCreateReview(e: React.FormEvent) {\n    e.preventDefault();\n\n    setReviewbtnLoading(true);\n\n    try {\n      if (editMode && existingReview) {\n        // Update existing review\n        await updateReview(existingReview.id, { \n          rating: clickedRating, \n          comment: customerReview \n        });\n        toast.success(\"Review updated successfully\");\n        \n        // Update parent component state immediately\n        if (onReviewUpdate) {\n          onReviewUpdate({ rating: clickedRating, comment: customerReview });\n        }\n        \n        router.refresh(); // Refresh the page to show updated data\n        if (onClose) onClose();\n      } else {\n        // Add new review\n        const formData = new FormData();\n        formData.set(\"product_id\", id.toString());\n        formData.set(\"slug\", slug);\n        formData.set(\"review\", customerReview);\n        formData.set(\"rating\", clickedRating.toString());\n        formData.set(\"email\", String(loggedInUserEmail));\n\n        await addReview(formData);\n        toast.success(\"Review added successfully\");\n        setCustomerReview(\"\");\n        setClickedRating(0);\n        setClickedReview(\"\");\n        setHoverRating(0);\n        setHoverReview(\"\");\n      }\n    } catch (err: unknown) {\n      if (err instanceof Error) {\n        toast.error(err.message);\n        throw new Error(err.message);\n      } else {\n        toast.error(\"An unknown error occurred\");\n        throw new Error(\"An unknown error occurred\");\n      }\n    } finally {\n      setReviewbtnLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"w-full mx-auto bg-white rounded-xl p-6\">\n      <h3 className=\"text-lg font-semibold text-gray-800 mb-3 text-center\">\n        {editMode ? \"Edit Review\" : \"Rate and review this product\"}\n      </h3>\n\n      <div className=\"flex items-center justify-center gap-2 mb-4\">\n        {ratings.map(({ rating, review }) => (\n          <Star\n            key={rating}\n            onPointerEnter={() => handleHoverIn({ rating, review })}\n            onPointerLeave={handleHoverOut}\n            onClick={() => handleStarClick({ rating, review })}\n            className={cn(\n              \"w-7 h-7 cursor-pointer text-black hover:text-black transition\",\n              rating <= hoverRating ||\n                (rating <= clickedRating && hoverRating < 1)\n                ? \"fill-black\"\n                : \"\"\n            )}\n          />\n        ))}\n      </div>\n\n      <p className=\"text-center text-gray-600 text-sm\">\n        {hoverReview || clickedReview || \"Review Score\"}\n      </p>\n\n      {/* Review Form */}\n\n      <form className=\"flex flex-col gap-4 mt-4\" onSubmit={handleCreateReview}>\n        <Textarea\n          name=\"review\"\n          value={customerReview}\n          onChange={(e) => setCustomerReview(e.target.value)}\n          className=\"border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-300 rounded-lg p-3 w-full resize-none h-32\"\n          placeholder=\"Write your review...\"\n          required\n          rows={6}\n        />\n\n        {editMode ? (\n          <div className=\"flex gap-3\">\n            <Button \n              type=\"button\"\n              onClick={onClose}\n              className=\"flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition cursor-pointer\"\n            >\n              Cancel\n            </Button>\n            <Button \n              className=\"flex-1 bg-black text-white py-2 rounded-lg hover:bg-gray-900 transition cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed\" \n              disabled={clickedRating < 1 ||\n                (customerReview && customerReview.trim()).length == 0 ||\n                reviewbtnLoading\n              }\n            >\n              {reviewbtnLoading ? \"Updating review...\" : \"Update Review\"}\n            </Button>\n          </div>\n        ) : (\n          <Button \n            className=\"bg-black text-white w-full py-2 rounded-lg hover:bg-gray-900 transition cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed\" \n            disabled={clickedRating < 1 ||\n              (customerReview && customerReview.trim()).length == 0 ||\n              reviewbtnLoading\n            }\n          >\n            {reviewbtnLoading ? \"Adding review...\" : \"Add Review\"}\n          </Button>\n        )}\n      </form>\n    </div>\n  );\n};\n\nexport default ReviewForm;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 728, "column": 0}, "map": {"version":3,"sources":["file:///D:/LPU/Python/Django%20Projects/Rest%20Api%20Project/AsteroidMart/frontend/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg p-6 duration-200 sm:max-w-lg\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,KAEoC;QAFpC,EACd,GAAG,OAC+C,GAFpC;IAGd,qBAAO,6LAAC,6KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,cAAc,KAEgC;QAFhC,EACrB,GAAG,OACkD,GAFhC;IAGrB,qBAAO,6LAAC,gLAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;MAJS;AAMT,SAAS,aAAa,KAEgC;QAFhC,EACpB,GAAG,OACiD,GAFhC;IAGpB,qBAAO,6LAAC,+KAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;MAJS;AAMT,SAAS,YAAY,KAEgC;QAFhC,EACnB,GAAG,OACgD,GAFhC;IAGnB,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,KAGgC;QAHhC,EACrB,SAAS,EACT,GAAG,OACkD,GAHhC;IAIrB,qBACE,6LAAC,gLAAuB;QACtB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,cAAc,KAOtB;QAPsB,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ,GAPsB;IAQrB,qBACE,6LAAC;QAAa,aAAU;;0BACtB,6LAAC;;;;;0BACD,6LAAC,gLAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,qHAAE,EACX,8VACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,6LAAC,8KAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,6LAAC,4MAAK;;;;;0CACN,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;MAhCS;AAkCT,SAAS,aAAa,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACpB,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,aAAa,KAAoD;QAApD,EAAE,SAAS,EAAE,GAAG,OAAoC,GAApD;IACpB,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,KAGgC;QAHhC,EACnB,SAAS,EACT,GAAG,OACgD,GAHhC;IAInB,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,kBAAkB,KAGgC;QAHhC,EACzB,SAAS,EACT,GAAG,OACsD,GAHhC;IAIzB,qBACE,6LAAC,oLAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS","debugId":null}},
    {"offset": {"line": 944, "column": 0}, "map": {"version":3,"sources":["file:///D:/LPU/Python/Django%20Projects/Rest%20Api%20Project/AsteroidMart/frontend/components/uiComponents/Modal.tsx"],"sourcesContent":["import React from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\n\ninterface Props {\n  children: React.ReactNode;\n  userHaveReview?: boolean;\n  editMode?: boolean;\n  trigger?: React.ReactNode;\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n}\n\nconst Modal = ({ children, userHaveReview = false, editMode = false, trigger, open, onOpenChange }: Props) => {\n\n  if(userHaveReview && !editMode){\n    return null\n  }\n    \n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      {!editMode && (\n        <DialogTrigger asChild>\n          {trigger || (\n            <button className=\"default-btn max-sm:text-[12px] max-sm:px-4 my-6\">\n              Click to add a review\n            </button>\n          )}\n        </DialogTrigger>\n      )}\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle className=\"hidden\">Are you absolutely sure?</DialogTitle>\n        </DialogHeader>\n\n        {children}\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default Modal;\n"],"names":[],"mappings":";;;;;AACA;;;AAiBA,MAAM,QAAQ;QAAC,EAAE,QAAQ,EAAE,iBAAiB,KAAK,EAAE,WAAW,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,YAAY,EAAS;IAEvG,IAAG,kBAAkB,CAAC,UAAS;QAC7B,OAAO;IACT;IAEA,qBACE,6LAAC,wIAAM;QAAC,MAAM;QAAM,cAAc;;YAC/B,CAAC,0BACA,6LAAC,+IAAa;gBAAC,OAAO;0BACnB,yBACC,6LAAC;oBAAO,WAAU;8BAAkD;;;;;;;;;;;0BAM1E,6LAAC,+IAAa;;kCACZ,6LAAC,8IAAY;kCACX,cAAA,6LAAC,6IAAW;4BAAC,WAAU;sCAAS;;;;;;;;;;;oBAGjC;;;;;;;;;;;;;AAIT;KA1BM;uCA4BS","debugId":null}},
    {"offset": {"line": 1017, "column": 0}, "map": {"version":3,"sources":["file:///D:/LPU/Python/Django%20Projects/Rest%20Api%20Project/AsteroidMart/frontend/components/productDetail/ReviewCard.tsx"],"sourcesContent":["\"use client\";\nimport { Review } from \"@/lib/type\";\nimport { User } from 'next-auth'\nimport { PenIcon, Star, TrashIcon } from \"lucide-react\";\nimport Image from \"next/image\";\nimport React, { useState, useTransition, useEffect } from \"react\";\nimport { timeAgo } from \"@/lib/utils\";\nimport { updateReview, deleteReview } from \"@/lib/api\";\nimport { useRouter } from \"next/navigation\";\nimport ReviewForm from \"./ReviewForm\";\nimport Modal from \"../uiComponents/Modal\";\nimport Button from \"../uiComponents/Button\";\n\nconst ReviewCard = ({ review, loggedInUser }: { review: Review, loggedInUser: User | undefined | null }) => {\n  const starArray = [1, 2, 3, 4, 5];\n  const [currentRating, setCurrentRating] = useState<number>(review.rating);\n  const [isPending, startTransition] = useTransition();\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const router = useRouter();\n  const isOwner = loggedInUser?.email === review.user.email;\n\n  // Update local state when review prop changes\n  useEffect(() => {\n    setCurrentRating(review.rating);\n  }, [review.rating]);\n\n  const handleRate = (value: number) => {\n    if (!isOwner || isPending) return;\n    setCurrentRating(value);\n    startTransition(async () => {\n      try {\n        await updateReview(review.id, { rating: value });\n        router.refresh();\n      } catch (err: unknown) {\n        // Revert on error\n        setCurrentRating(review.rating);\n        if (err instanceof Error) {\n          alert(err.message);\n        } else {\n          alert(\"Failed to update rating\");\n        }\n      }\n    });\n  };\n\n  const handleDelete = () => {\n    if (!isOwner || isPending) return;\n    setShowDeleteModal(true);\n  };\n\n  const handleConfirmDelete = () => {\n    startTransition(async () => {\n      try {\n        await deleteReview(review.id);\n        setShowDeleteModal(false);\n        router.refresh();\n      } catch (err: unknown) {\n        if (err instanceof Error) {\n          alert(err.message);\n        } else {\n          alert(\"Failed to delete review\");\n        }\n      }\n    });\n  };\n\n  const handleCancelDelete = () => {\n    setShowDeleteModal(false);\n  };\n\n  const handleEdit = () => {\n    setShowEditModal(true);\n  };\n\n  const handleCloseEditModal = () => {\n    setShowEditModal(false);\n  };\n\n  const handleReviewUpdate = (updatedReview: { rating: number; comment: string }) => {\n    // Update local state immediately when review is updated\n    setCurrentRating(updatedReview.rating);\n  };\n\n  return (\n    <div className=\"w-full bg-white shadow-lg px-6 py-6 rounded-lg flex flex-col gap-4 mb-6\">\n      {/* Action buttons for editing and deleting the review */}\n      <div className=\"flex justify-between items-center\">\n        {loggedInUser?.email === review.user.email && <span className=\"flex gap-4\">\n          <>\n            {/* Trash button to delete review */}\n            <button \n              onClick={handleDelete}\n              disabled={isPending}\n              className=\"bg-gray-200 p-2 rounded-md cursor-pointer transition-all hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <TrashIcon className=\"size-5 text-gray-600\" />\n            </button>\n\n            {/* Pen button to edit review */}\n            <button \n              onClick={handleEdit}\n              disabled={isPending}\n              className=\"bg-gray-200 p-2 rounded-md cursor-pointer transition-all hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <PenIcon className=\"size-5 text-gray-600\" />\n            </button>\n          </>\n        </span>}\n\n        {/* Information showing when the review was edited */}\n        <span className=\"text-sm text-gray-500\">\n          {review.created_at == review.updated_at || <small className=\"block\">edited...</small>}\n          <small>{timeAgo(review.updated_at)}</small>\n        </span>\n      </div>\n\n      {/* Reviewer's profile and review content */}\n\n      <div className=\"flex gap-4 items-center\">\n        {/* Profile picture */}\n        <div className=\"w-[50px] h-[50px] rounded-full relative overflow-hidden border-2 border-gray-200\">\n          <Image\n            src={review.user.profile_picture_url ? `${review.user.profile_picture_url}` : \"/profile_pic.jpg\"}\n            alt=\"profile_pic\"\n            className=\"object-cover rounded-full\"\n            fill\n            sizes=\"50px\"\n          />\n        </div>\n\n        {/* Review content including name, rating, and review text */}\n        <div className=\"flex flex-col flex-1\">\n          <p className=\"font-semibold text-lg text-gray-800\">{review.user.first_name} {review.user.last_name}</p>\n\n          <div className=\"flex gap-1 mt-2\">\n            {starArray.map((star) => (\n              <button\n                key={star}\n                type=\"button\"\n                aria-label={`Rate ${star} star${star > 1 ? 's' : ''}`}\n                onClick={() => handleRate(star)}\n                disabled={!isOwner || isPending}\n                className=\"disabled:cursor-not-allowed\"\n              >\n                <Star\n                  className={\n                    star <= currentRating\n                      ? \"size-5 fill-black\"\n                      : \"size-5 fill-gray-200 text-gray-300\"\n                  }\n                />\n              </button>\n            ))}\n          </div>\n\n          {/* Review text */}\n          <small className=\"text-gray-600 text-justify leading-6 mt-4 font-medium\">\n            {review.comment}\n          </small>\n        </div>\n      </div>\n\n      {/* Edit Review Modal */}\n      <Modal \n        editMode={true}\n        open={showEditModal}\n        onOpenChange={setShowEditModal}\n      >\n        <ReviewForm \n          product={{ id: review.id, slug: \"\", name: \"\", description: \"\", price: 0, image: \"\", reviews: [], rating: { id: 0, average_rating: 0, total_reviews: 0 }, similar_products: [], poor_review: 0, fair_review: 0, good_review: 0, very_good_review: 0, excellent_review: 0 }}\n          loggedInUserEmail={loggedInUser?.email}\n          editMode={true}\n          existingReview={review}\n          onClose={handleCloseEditModal}\n          onReviewUpdate={handleReviewUpdate}\n        />\n      </Modal>\n\n      {/* Delete Confirmation Modal */}\n      <Modal \n        editMode={true}\n        open={showDeleteModal}\n        onOpenChange={setShowDeleteModal}\n      >\n        <div className=\"w-full mx-auto bg-white rounded-xl p-6\">\n          <div className=\"text-center\">\n            <div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4\">\n              <TrashIcon className=\"h-6 w-6 text-red-600\" />\n            </div>\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-2\">\n              Delete Review\n            </h3>\n            <p className=\"text-gray-600 mb-6\">\n              Are you sure you want to delete this review? This action cannot be undone.\n            </p>\n            <div className=\"flex gap-3\">\n              <Button \n                onClick={handleCancelDelete}\n                className=\"flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600 transition cursor-pointer\"\n              >\n                Cancel\n              </Button>\n              <Button \n                onClick={handleConfirmDelete}\n                disabled={isPending}\n                className=\"flex-1 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {isPending ? \"Deleting...\" : \"Delete Review\"}\n              </Button>\n            </div>\n          </div>\n        </div>\n      </Modal>\n    </div>\n  );\n};\n\nexport default ReviewCard;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1428, "column": 0}, "map": {"version":3,"sources":["file:///D:/LPU/Python/Django%20Projects/Rest%20Api%20Project/AsteroidMart/frontend/components/uiComponents/Collaps.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { ChevronsUpDown } from \"lucide-react\"\r\nimport { User } from 'next-auth'\r\n\r\nimport { Button } from \"@/components/ui/button\"\r\nimport {\r\n  Collapsible,\r\n  CollapsibleContent,\r\n  CollapsibleTrigger,\r\n} from \"@/components/ui/collapsible\"\r\nimport { Review } from \"@/lib/type\"\r\nimport ReviewCard from \"../productDetail/ReviewCard\"\r\n\r\nexport function CollapsibleDemo({ reviews, loggedInUser }: { reviews: Review[], loggedInUser: User | undefined | null }) {\r\n  const [isOpen, setIsOpen] = React.useState(false)\r\n\r\n  return (\r\n    <Collapsible\r\n      open={isOpen}\r\n      onOpenChange={setIsOpen}\r\n      className=\"space-y-2\"\r\n    >\r\n      <div className=\"flex items-center justify-between gap-4 px-4\">\r\n      <h4 className=\"my-4 font-semibold\">{reviews.length < 2 ? 'Review' : 'Reviews'} ({reviews.length})</h4>\r\n        <CollapsibleTrigger asChild>\r\n          <Button variant=\"ghost\" size=\"icon\" className=\"size-8 cursor-pointer\">\r\n            <ChevronsUpDown />\r\n            <span className=\"sr-only\">Toggle</span>\r\n          </Button>\r\n        </CollapsibleTrigger>\r\n      </div>\r\n      {!isOpen && <ReviewCard key={reviews[0].id} review={reviews[0]} loggedInUser={loggedInUser} />}\r\n      <CollapsibleContent className=\"flex flex-col gap-2\">\r\n      {reviews.map((review) => (\r\n        <ReviewCard key={review.id} review={review} loggedInUser={loggedInUser} />\r\n      ))}\r\n      </CollapsibleContent>\r\n    </Collapsible>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAGA;AACA;AAMA;;;AAbA;;;;;;AAeO,SAAS,gBAAgB,KAAuF;QAAvF,EAAE,OAAO,EAAE,YAAY,EAAgE,GAAvF;;IAC9B,MAAM,CAAC,QAAQ,UAAU,GAAG,yKAAc,CAAC;IAE3C,qBACE,6LAAC,kJAAW;QACV,MAAM;QACN,cAAc;QACd,WAAU;;0BAEV,6LAAC;gBAAI,WAAU;;kCACf,6LAAC;wBAAG,WAAU;;4BAAsB,QAAQ,MAAM,GAAG,IAAI,WAAW;4BAAU;4BAAG,QAAQ,MAAM;4BAAC;;;;;;;kCAC9F,6LAAC,yJAAkB;wBAAC,OAAO;kCACzB,cAAA,6LAAC,wIAAM;4BAAC,SAAQ;4BAAQ,MAAK;4BAAO,WAAU;;8CAC5C,6LAAC,mPAAc;;;;;8CACf,6LAAC;oCAAK,WAAU;8CAAU;;;;;;;;;;;;;;;;;;;;;;;YAI/B,CAAC,wBAAU,6LAAC,wJAAU;gBAAqB,QAAQ,OAAO,CAAC,EAAE;gBAAE,cAAc;eAAjD,OAAO,CAAC,EAAE,CAAC,EAAE;;;;;0BAC1C,6LAAC,yJAAkB;gBAAC,WAAU;0BAC7B,QAAQ,GAAG,CAAC,CAAC,uBACZ,6LAAC,wJAAU;wBAAiB,QAAQ;wBAAQ,cAAc;uBAAzC,OAAO,EAAE;;;;;;;;;;;;;;;;AAKlC;GA1BgB;KAAA","debugId":null}}]
}